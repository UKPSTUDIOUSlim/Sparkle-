<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sparkle</title>
  <link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen">Loading...</div>

  <!-- Main App Container -->
  <div id="app-container" style="display: none;">
    <!-- Header with Company Name and Menu Button -->
    <header>
      <h1>Sparkle✨</h1>
      <button id="menu-toggle" onclick="toggleMenu()">☰</button>
    </header>

    <!-- Sliding Menu -->
    <div id="sliding-menu">
      <button id="menu-close" onclick="toggleMenu()">✕</button>
      <div class="menu-content">
        <button id="login-button" onclick="handleLogin()">Sign Up / Log In</button>
        <a href="blog.html"><button id="blog-button">View Blog</button></a>
        <button id="history-button" onclick="showHistoryPanel()">Recently Played</button>
        <button id="liked-songs-button" onclick="showLikedSongsPanel()">Liked Songs</button>
        <button id="bookmarks-button" onclick="showBookmarksPanel()">Bookmarks</button>
      </div>

      <!-- Recently Played History Panel -->
      <div id="history-panel">
        <div class="history-header">
          <button onclick="backToMenu()">← Back</button>
          <h2>Recently Played</h2>
        </div>
        <div id="history-list"></div>
        <button class="clear-history" onclick="clearHistory()">Clear History</button>
      </div>

      <!-- Liked Songs Panel -->
      <div id="liked-songs-panel">
        <div class="liked-songs-header">
          <button onclick="backToMenu()">← Back</button>
          <h2>Liked Songs</h2>
        </div>
        <div id="liked-songs-list"></div>
        <button class="clear-history" onclick="clearLikedSongs()">Clear Liked</button>
      </div>

      <!-- Bookmarks Panel -->
      <div id="bookmarks-panel">
        <div class="bookmarks-header">
          <button onclick="backToMenu()">← Back</button>
          <h2>Bookmarks</h2>
        </div>
        <div id="bookmarks-list"></div>
        <button class="clear-history" onclick="clearBookmarks()">Clear Bookmarks</button>
      </div>
    </div>

    <div class="marquee">
      <p>Search by author using "Author:name". Sparkle gets new songs and a new UI ✨</p>
    </div>

    <!-- Search Bar -->
    <div class="search-bar">
      <input
        type="text"
        id="search-input"
        placeholder="Search for music..."
        oninput="showSuggestions()"
      />
      <button onclick="searchSong()">Search</button>
      <ul id="suggestion-box"></ul>
    </div>
    <div id="search-result"></div>

    <!-- Song List -->
    <div id="song-list">
      <!-- Songs will load dynamically -->
    </div>

    <!-- MINI PLAYER (Collapsed) -->
    <div id="mini-player" style="display: none;">
      <div id="mini-player-left" onclick="expandPlayer()">
        <img id="mini-song-image" src="" alt="Song" />
        <div>
          <p id="mini-song-title">Song Title</p>
          <p id="mini-song-author">Song Author</p>
        </div>
      </div>
      <div id="mini-player-controls">
        <button id="mini-prev-btn" onclick="event.stopPropagation();prevSong();">Prev</button>
        <button id="mini-play-btn" onclick="event.stopPropagation();togglePlayPause();">Play</button>
        <button id="mini-next-btn" onclick="event.stopPropagation();nextSong();">Next</button>
        <!-- Close button (stops song & hides mini player) -->
        <button id="mini-close-btn" onclick="event.stopPropagation();closeMiniPlayer();">✖</button>
      </div>
    </div>

    <!-- FULL-PAGE PLAYER -->
    <div id="full-player" style="display: none;">
      <!-- Top Bar: Back arrow & Bookmark button -->
      <div id="full-player-header">
        <button id="back-to-mini" onclick="collapsePlayer()">←</button>
        <button id="bookmark-btn" class="player-btn" onclick="toggleBookmarkCurrentSong()">Bookmark</button>
      </div>

      <!-- Song Image & Info -->
      <img id="full-song-image" src="" alt="Song Image" />
      <h2 id="full-song-title"></h2>
      <p id="full-song-author"></p>

      <!-- Controls row -->
      <div id="player-controls">
        <button id="prev-btn" class="player-btn" onclick="prevSong()">Prev</button>
        <button id="play-btn" class="player-btn" onclick="togglePlayPause()">Play</button>
        <button id="next-btn" class="player-btn" onclick="nextSong()">Next</button>
        <button id="like-btn" class="player-btn" onclick="toggleLikeCurrentSong()">♡</button>
      </div>

      <!-- Time display -->
      <div id="time-container">
        <span id="time-current">00:00</span>
        <span>/</span>
        <span id="time-total">00:00</span>
      </div>

      <!-- Seek/Drag Slider -->
      <div id="progress-container">
        <input type="range" id="progress-bar" value="0" min="0" max="100" step="1" />
      </div>

      <!-- Hidden audio element -->
      <audio id="audio-player"></audio>
    </div>

    <!-- Notification for Android devices -->
    <div id="notification" style="display: none;">
      <h1>Alert:</h1>
      <p>We use cookies for a better experience.</p>
      <button id="close-notification" onclick="closeNotification()">Close</button>
    </div>
  </div>

  <footer id="footer">
    <p>Please wait a few seconds after clicking a song. Having an issue?
      <button id="report" onclick="showEmail()">Report now</button>
    </p>
  </footer>
  <script src="script.js"></script>
</body>
</html>
